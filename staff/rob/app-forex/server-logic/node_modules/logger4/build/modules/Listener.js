"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Listener = void 0;
class Listener {
    constructor() {
        this._listeners = {};
    }
    get listeners() {
        return this._listeners;
    }
    addListener(listenerId, callBack, key = null) {
        if (typeof (callBack) === 'function') {
            if (this._listeners[listenerId] === undefined) {
                this._listeners[listenerId] = {};
            }
            key = key === null
                ? 'g' + Object.keys(this._listeners[listenerId]).length
                : 's' + key;
            this._listeners[listenerId][key] = callBack;
        }
    }
    callListener(listenerId, params = []) {
        let errors = [];
        let values = [];
        if (this._listeners[listenerId] !== undefined) {
            Object.keys(this._listeners[listenerId]).forEach((key) => {
                try {
                    values.push(this._listeners[listenerId][key](...params));
                }
                catch (e) {
                    errors.push(e);
                }
            });
        }
        if (errors.length > 0) {
            throw errors[0];
        }
        return values;
    }
}
exports.Listener = Listener;
//# sourceMappingURL=Listener.js.map